<!DOCTYPE html>
<head>
    <title>Список студентов</title>
    <style>
        .main-table
        {
            border-style: solid;
            border-width: 1px;
        }
        .login-hide
        {
            display: none;
        }
        td
        {
            border-style: solid;
            border-width: 1px;
        }
        form
        {
            padding: 5px;
            border-style: solid;
            border-width: 1px;
        }
        form td
        {
            border-style: none;
        }
    </style>
</head>
<body>
    <h1>Список студентов</h1>
    <table>
        <thead>
            <tr>
                <td>#</td>
                <td>ФИО</td>
                <td>Курс</td>
                <td>Специальность</td>
                <td>№ зачётной книжки</td>
                <td class="login-hide"></td>
                <td class="login-hide"></td>
            </tr>
        </thead>
        <tbody id="table-body">
        </tbody>
    </table>

    <input id="add-student-button" class="login-hide" type="button" value="Добавить запись">
    <input id="delete-student-button" class="login-hide" type="button" value="Удалить выделенные записи">
    <form id="add-student-form" method="POST" name="add-student" data-id="-1" style="display: none">
        <h2>Форма добавления/изменения данных<input id="close-form-button" type="button" value="[X]" 
            style="font-size: 16pt;"/></h2>
        <table>
            <tr>
                <td><p>ФИО</p></td>
                <td><input id="student-fio" type="text" maxlength="30"></td>
            </tr>
            <tr>
                <td><p>Курс</p></td>
                <td><input id="student-course" type="number" min = "1" max = "5" value="1"/></td>
            </tr>
            <tr>
                <td><p>Специальность</p></td>
                <td><input id="student-spec" type="text" maxlength="50"></td>
            </tr>
            <tr>
                <td><p>№ зачётной книжки</p></td>
                <td><input id="student-number" type="text" maxlength="10"></td>
            </tr>
        </table>
        <input id="confirm-button" type="submit" value="Добавить"/>
    </form>

    <input id="login-button" type="button" value="Вход" style="position: absolute; right: 5%; top: 5%; width: 5%;">
    <input id="logout-button" class="login-hide" type="button" value="Выход" style="position: absolute; right: 5%; top: 5%; width: 5%;">

    <form id="login-form" method="POST" style="border-style: solid; position: absolute; display: none; right: 0%; top: 10%; width: 20%;">
        <p>Имя пользователя</p>
        <input id="login-textbox" type="text" maxlength="30"><br>
        <p>Пароль</p>
        <input id="password-textbox" name="login" type="password" maxlength="30"><br><br>
        <input type="submit" name="password" value="Войти" style="position: absolute; right: 0%; bottom: 0%;">
    </form>

    <script>
        fetch('/students')
        .then(res => res.json())
        .then(result =>{
            for(let i = 0; i < result.length; i++){
                const newRow = document.createElement('tr');
                newRow.innerHTML = `<td>${result[i][0]}</td>
                                    <td>${result[i][1]}</td>
                                    <td>${result[i][2]}</td>
                                    <td>${result[i][3]}</td>
                                    <td>${result[i][4]}</td>
                                    <td><input class="login-hide" type="button" value="Изменить" 
                                        data-id="${result[i][0]}" onclick="EditHandler(this)"/></td>
                                    <td><input class="login-hide" type="checkbox" data-id="${result[i][0]}"/></td>`;
                document.querySelector('#table-body').append(newRow);
            }
        });
    </script>
    <script src="/handlers.js"></script>
</body>